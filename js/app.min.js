function sortByName(e,t){return e.player<t.player?-1:e.player>t.player?1:0}function copyRecordFromDefault(e){var t=vm.$data.missions.filter(function(t){return t.id===e})[0];return t.requirements=copyRequirementsFromDefault(t.id),t}function copyRequirementsFromDefault(e){return vm.$data.missions.filter(function(t){return t.id===e})[0].requirements.map(function(e){return new Requirement(e)})}function updateRequirements(e){return e.map(function(e){return new Requirement(e)})}function updateRecords(e){return e.map(function(e){if(void 0===e.program_type){var t=copyRecordFromDefault(e.value);return t.requirements=updateRequirements(e.requirements),t}return e})}window.onload=function(){Vue.component("v-select",VueSelect.VueSelect),vm=new Vue({el:"#app",data:{missions:[],defaults:{version:"0.0.0",missions:[],program_types:[],durations:[],series:[],teams:[],positions:[]},activeMissions:[],editingMission:new Mission({requirements:[]}),selectedMission:null,filteredMissions:[],selectedFilter:null,selectedTeam:null,selectedPosition:null},created:function(){var e=this;jQuery.ajax({url:"js/data/missions.json",dataType:"json",async:!1,success:function(t){e.$data.missions=getMissionsFromData(t.missions),e.$data.defaults=t,e.$data.filteredMissions=e.$data.missions}})},mounted:function(){this.$data.activeMissions=this.getActiveMissions()},updated:function(){this.saveActiveMissions()},watch:{selectedFilter:function(e){"Team Epic"!=e&&(this.$data.selectedTeam=null),this.updateProgramFilter(e)},selectedTeam:function(e){this.updateTeamFilter(e)},selectedPosition:function(e){this.updatePositionFilter(e)}},methods:{handleOK:function(e){if(null!=this.selectedMission){if(!this.hasActiveMission(this.activeMissions,this.selectedMission))copyRecordFromDefault(this.selectedMission.id).requirements=copyRequirementsFromDefault(this.selectedMission.id),this.activeMissions.push(this.selectedMission);this.selectedMission=null}},handleEditOK:function(e){this.$refs.editModal.hide(),this.saveActiveMissions()},getActiveMissions:function(){var e=localStorage.getItem("CurrentActiveMissions");return null!=e&&JSON.parse(e).length>0?e=getMissionsFromData(updateRecords(JSON.parse(e))):null!=localStorage.getItem("activeMissions")?(console.log("-- old data found!"),upgradeOldData(JSON.parse(localStorage.getItem("activeMissions")))):[]},saveActiveMissions:function(){localStorage.setItem("CurrentActiveMissions",JSON.stringify(this.activeMissions))},hasActiveMission:function(e,t){return e.filter(function(e){return e.id===t.id}).length>0},requirementIncrease:function(e){e.current<e.goal&&(e.current+=1)},requirementReset:function(e){e.current=0},requirementResetAll:function(e){for(var t=e.requirements,i=0;i<t.length;i++)t[i].current=0},isRequirementComplete:function(e){return e.current>=e.goal},isRequirementStarted:function(e){return e.current>0},areAllRequirementsComplete:function(e){for(var t=!0,i=e.requirements,s=0;s<i.length;s++)i[s].goal>i[s].current&&(t=!1);return t},removeActiveMission:function(e,t){for(var i=0;i<e.length;i++)if(e[i].id==t.id){e.splice(i,1);break}},clearActiveMissions:function(){this.activeMissions=[]},editMission:function(e){this.$data.editingMission=e,this.$refs.editModal.show()},updateProgramFilter:function(e){this.updateFilter()},updateTeamFilter:function(e){this.updateFilter()},updatePositionFilter:function(e){this.updateFilter()},updateFilter:function(){var e=this;e.$data.filteredMissions=e.$data.missions,e.$data.selectedMission=null,null!=e.$data.selectedFilter&&(console.log("program type filter"),e.$data.filteredMissions=e.$data.filteredMissions.filter(function(t){return t.program_type===e.$data.selectedFilter})),null!=e.$data.selectedTeam&&(console.log("team filter"),e.$data.filteredMissions=e.$data.filteredMissions.filter(function(t){return t.team===e.$data.selectedTeam})),null!=e.$data.selectedPosition&&(console.log("position filter"),e.$data.filteredMissions=e.$data.filteredMissions.filter(function(t){return t.position===e.$data.selectedPosition}))}}})};
