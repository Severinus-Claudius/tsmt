var vm="";window.onload=function(){Vue.component("v-select",VueSelect.VueSelect),vm=new Vue({el:"#app",data:{missions:[],defaults:{version:"0.0.0",last_update:"",missions:[],program_types:[],durations:[],series:[],teams:[],positions:[]},activeMissions:[],editingMission:new Mission({requirements:[]}),selectedMission:null,filteredMissions:[],selectedFilter:null,selectedTeam:null,selectedPosition:null},created:function(){var e=this;jQuery.ajax({url:"js/data/missions.json",dataType:"json",async:!1,success:function(t){e.$data.missions=getMissionsFromData(t.missions).sort(e.sortByTitle),e.$data.defaults={version:t.version,last_update:void 0!==t.last_update?t.last_update:"",program_types:t.program_types,durations:t.durations,series:t.series,teams:t.teams,positions:t.positions},e.$data.filteredMissions=e.$data.missions}})},mounted:function(){this.$data.activeMissions=this.getActiveMissions()},updated:function(){this.saveActiveMissions()},watch:{selectedFilter:function(e){"Team Epic"!=e&&(this.$data.selectedTeam=null),this.updateProgramFilter(e)},selectedTeam:function(e){this.updateTeamFilter(e)},selectedPosition:function(e){this.updatePositionFilter(e)}},methods:{sortByTitle:function(e,t){var i=e.title.toLowerCase(),s=t.title.toLowerCase();return i<s?-1:i>s?1:0},handleSelectedMission:function(e){var t=this;null!=t.selectedMission&&(t.hasActiveMission(t.activeMissions,t.selectedMission)||t.activeMissions.push(t.createActiveMission(t.selectedMission.id)),t.selectedMission=null)},handleEditedMission:function(e){var t=this;t.$refs.editModal.hide(),t.saveActiveMissions()},getActiveMissions:function(){var e=this,t=localStorage.getItem("CurrentActiveMissions");if(null!=t&&JSON.parse(t).length>0){var i=JSON.parse(t);return i.map(function(t){return e.updateActiveMission(t)})}return[]},updateActiveMission:function(e){var t=this,i=t.createActiveMission(e.id);return i.requirements=t.updateMissionRequirements(i,e),i},updateMissionRequirements:function(e,t){return e.requirements.map(function(e){return e.current=t.requirements.filter(function(t){return t.requirement_type===e.requirement_type}).shift().current,e})},createActiveMission:function(e){var t=this,i=t.missions.filter(function(t){return t.id===e}).shift(),s=new Mission(i);return s},saveActiveMissions:function(){localStorage.setItem("CurrentActiveMissions",JSON.stringify(this.activeMissions))},hasActiveMission:function(e,t){return e.filter(function(e){return e.id===t.id}).length>0},requirementIncrease:function(e){e.current<e.goal&&(e.current+=1)},requirementReset:function(e){e.current=0},requirementResetAll:function(e){for(var t=e.requirements,i=0;i<t.length;i++)t[i].current=0},isRequirementComplete:function(e){return e.current>=e.goal},isRequirementStarted:function(e){return e.current>0},areAllRequirementsComplete:function(e){for(var t=!0,i=e.requirements,s=0;s<i.length;s++)i[s].goal>i[s].current&&(t=!1);return t},removeActiveMission:function(e,t){for(var i=0;i<e.length;i++)if(e[i].id==t.id){e.splice(i,1);break}},clearActiveMissions:function(){this.activeMissions=[]},editMission:function(e){var t=this;t.$data.editingMission=e,t.$refs.editModal.show()},createEmptyMission:function(){return new Mission({requirements:[]})},updateProgramFilter:function(e){this.updateFilter()},updateTeamFilter:function(e){this.updateFilter()},updatePositionFilter:function(e){this.updateFilter()},updateFilter:function(){var e=this;e.$data.filteredMissions=e.$data.missions,e.$data.selectedMission=null,null!=e.$data.selectedFilter&&(e.$data.filteredMissions=e.$data.filteredMissions.filter(function(t){return t.program_type===e.$data.selectedFilter})),null!=e.$data.selectedTeam&&(e.$data.filteredMissions=e.$data.filteredMissions.filter(function(t){return t.team===e.$data.selectedTeam})),null!=e.$data.selectedPosition&&(e.$data.filteredMissions=e.$data.filteredMissions.filter(function(t){return t.position===e.$data.selectedPosition}))}}})};